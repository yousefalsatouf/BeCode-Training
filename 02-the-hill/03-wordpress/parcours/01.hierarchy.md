# La Hiérarchie des templates

## Introduction

[Explication dans le Codex](https://codex.wordpress.org/Theme_Development)

Il y a déjà beaucoup de thèmes existant alors pourquoi créer son propre thème ? Voici les avantages de créer son propre thème :

- C'est créer son propre univers, avec le look que l'on veut,
- d'un point de vue technique cela aide à l'apprentissage et la compréhension profonde de WordPress
- C’est une excellente opportunité pour mieux connaître et comprendre le HTML, CSS et PHP.

Pour créer un thème, il faut commencer par ajouter un dossier avec le nom de votre thème dans le répertoire `wp-content/themes`.

Dans WordPress, un thème a une structure assez simple, car il ne nécessite qu'au minimum, trois fichiers !

`index.php`, `functions.php` et `style.css`

Pour pouvoir récupérer son thème dans le dashboard ajouter un `style.css` et mettez y les renseignements de votre thème. 

Exemple :

```
/*
Theme Name: premierWordpress
Description: premier wordpress des Jepsen
Author: Monsieur Jamar
Author URI: https://github.com/NicolasJamar
Version: 1.0
*/
```

## Schéma des templates

Observez bien ce document: https://wphierarchy.com/

Ce sera votre guide pour la création de vos template php. C'est maintenant que vous pouvez comprendre le lien entre la partie back du CMS et le rendu front.

Voici la liste de tous les templates utilisables avec un site WordPress:
- index.php
- front-page.php
- home.php
- archive.php
- single.php
- page.php
- taxonomy.php
- category.php
- tag.php
- author.php
- date.php
- search.php
- 404.php


Pour bien comprendre la hiérarchie des templates sous WordPress, il suffit de suivre le chemin. 

Tout template créé réfère à index.php. C’est le template, le fichier central. Ca veut dire que si un visiteur tente d'arriver directement sur la page d’un article (single.php) et que ce fichier n’existe pas, il sera directement renvoyé vers le fichier index.php. Ainsi, vous pourrez créer autant de templates que vous voudrez dans la liste proposée par ce schéma, il vont tous être sous la « responsabilité » de l’index.php.

Idem pour les niveaux au-dessus. Si vous avez un template `archive.php` et qu'un utilisateur tente d'arriver sur une catégorie (`category-slug.php`) qui n'existe plus, il sera rediriger vers `archive.php`. 

Exemple: 
- un utilisateur arrive sur la page d'accueil de mon site, ça correspond à `front-page.php`, 
- ensuite il se rend sur la page "Nourriture" -> `page-manger.php`
- puis sur cette page, il clique sur lien vers un article parlant des délicieuses "nouilles du Colruyt" -> `single-pates.php`
- puis, il veut voir tous les articles correspondant aux pâtes -> `archive-pates.php` 
- il clique sur la catégorie "nouilles" -> `category-nouilles.php`
- si `category-nouilles.php` n'existe pas, il reviendra sur `archive-pates.php`

___

### Les slugs, id, modèle de page

Vous noterez dans l'exemple que j'utilise des termes pour désigner plus précisécement les types de contenus. 
Ce sont les **slugs** ou **posttypes**. 

On peut également utiliser les **id**. Oui car derrière chaque élément créé dans WordPress, il y a un id correspondant.

**Le slug** ou l'id permet de cibler le template à atteindre. 

___

### Templates Page et Modèle de page

Je répète, **Le slug** ou l'id permet de cibler le template à atteindre. En effet, votre site peut avoir plusieurs types de pages (page "Nourriture", page contact ...). Il faut les distinguer car elles sont différentes. Par exemple, la page contact contient un formulaire, mais pas la page nourriture. 

Maintenant, admettons que j'ai une page "Boissons" dont la forme et le html ressemblent à la page "Nourriture", nous créerons un fichier commun `page-manger.php`. 

En haut de ce template, nous noterons ceci :
```PHP
<?php
/*
Template Name: Page_Manger
*/
?>

```

Vous pourrez ensuite relier la page de votre choix à ce template de page dans la partie CMS.

Voir Attributs 

![attributsmanger](./images/attributsmanger.png)

___

### Template Single et Archive

Je reprends encore mon exemple. J'avais un post "Nouilles du Colruyt" créé à partir du template `single-pates.php`. 

#### Comment ça marche? 

Dans la partie CMS, j'ai créé un type de post "pâtes" avec l'aide du plugin CPT UI. 
J'aurais pu églament créer une fonction dans `functions.php`. 

```PHP
	function register_pates_post_type() {
	    register_post_type( 'pates', array(
	        'labels' => array(
	            'name' => 'Pâtes',
	            'singular_name' => 'Pâte',
	        ),
	        'public' => true,
	        'show_ui' => true,
	        'has_archive' => true,
	        'show_in_menu' => 'edit.php?post_type=pates',
	        'supports' => array( 'title' ,'thumbnail', 'editor' ),
	    ) );
	}
	add_action( 'init', 'register_pates_post_type' );
```

`(A noter que lorsque je modifie un élément dans Wordpress, j'appelle un hook, ici de type action)`

Un nouveau type de post apparaît dans le menu du dashboard, Pâtes. 

Si je clique dessus la liste des posts apparaît. 

Pour récupérer tout ces types de post sur une page, je crée un template `archive-pates.php`

### header.php, footer.php, sidebar.php

`header.php`, ben c’est le header qui contient les informations de base qui vont permettre à la page web de bien s’afficher dans le navigateur. Le header comprend notamment:

- le DOCTYPE, qui nous fournit les informations sur le codage utilisé par la page web,
- la balise HEAD et tout ce qu’elle comporte: les balises META, le titre du blog, le lien vers la feuille de style et vers les flux RSS.
- L’ouverture de la balise BODY.

Exemple :

```html
<!DOCTYPE html>
<html <?php language_attributes(); ?>>

<head>
    <meta charset= "<?php bloginfo('charset'); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <?php wp_head(); ?>
</head>

<body <?php body_class(); ?> >
    <h1><?php bloginfo('name'); ?></h1> 

```

On voit plusieurs functions spécifiques à Worpress. 

`wp_head();` désigne à Wordpress que c'est ici que ce trouve le header. 

Pour récupérer le header dans chaque page et post, on mettra `get_header();`

Ca fonctionne de la même manière pour le footer.

Pour la sidebar bar, pas besoin du wp_sidebar, mettez directement `<?php get_sidebar(); ?>` sur le côté par exemple (logique). 


-----

[02. Functions.php](02.Functions.md)
